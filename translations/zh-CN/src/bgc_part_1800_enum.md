枚举类型：`enum`

C语言通过枚举类型`enum`来让我们以名称表示常量整数值的另一种方式。

例如：

``` {.c}
enum {
  ONE=1,
  TWO=2
};

printf("%d %d", ONE, TWO);  // 1 2
```

在某些方面，枚举类型可能比使用`#define`更好或者说不同。主要区别包括：

* `enum`只能是整数类型。
* `#define`可以定义任何类型。
* 在调试器中，枚举类型通常以它们的符号标识符显示。
* `#define`方式定义的数字只会显示为原始数字，在调试时难以知道其含义。

由于枚举类型是整数类型，它们可以在任何整数可以使用的地方使用，包括在数组维度和`case`语句中。

## `enum`的行为

### 编号

枚举类型默认是自动编号，除非您手动覆盖。

它们从`0`开始，默认情况下会自动递增：

``` {.c}
enum {
    SHEEP,  // 值为0
    WHEAT,  // 值为1
    WOOD,   // 值为2
    BRICK,  // 值为3
    ORE     // 值为4
};

printf("%d %d\n", SHEEP, BRICK);  // 0 3
```

您也可以强制指定特定的整数值，就像前面我们看到的那样：

``` {.c}
enum {
  X=2,
  Y=18,
  Z=-2
};
```

重复不是问题：

``` {.c}
enum {
  X=2,
  Y=2,
  Z=2
};
```

如果省略值，则编号会从上次指定的值开始向正方向继续计数。例如：

``` {.c}
enum {
  A,    // 0，默认起始值
  B,    // 1
  C=4,  // 4，手动设置
  D,    // 5
  E,    // 6
  F=3,  // 3，手动设置
  G,    // 4
  H     // 5
}
```

### 尾逗号

这是完全没问题的，如果这是你的风格：

``` {.c}
enum {
  X=2,
  Y=18,
  Z=-2,   // <-- 逗号留空
};
```

在最近几十年的语言中变得越来越流行，你可能会很高兴看到这一点。

### 范围

[i[`enum` 枚举类型-->范围]<]

`enum`的范围正如你期望的那样。如果在文件范围内，整个文件都可以看到它。如果在一个块中，它只在该块中可见。

通常`enum`的定义会放在头文件中，这样它们就可以在文件范围内被`#include`。

[i[`enum` 枚举类型-->范围]>]

### 风格

正如你已经注意到的，通常会将`enum`的符号声明为大写（用下划线分隔）。

这并不是必须的，但是是一个非常常见的习惯。

## 你的`enum`是一个类型

关于`enum`需要知道的一件重要事情是：它们是一种类型，类似于`struct`是一种类型。

你可以给它们一个标签名称，这样你以后就可以引用该类型并声明该类型的变量。

现在，既然`enum`是整数类型，为什么不直接使用`int`呢？

在C语言中，这样做的最好理由是代码清晰性--用一种好的、有类型的方式来描述你的代码思路。C语言（不像C++）实际上并不强制让特定`enum`的值在范围内。

让我们来做一个示例，声明一个类型为`enum resource`的变量`r`，可以包含这些值：

``` {.c}
// 命名的enum, 类型是"enum resource"

enum resource {
    SHEEP,
    WHEAT,
    WOOD,
    BRICK,
    ORE
};

// 声明一个类型为"enum resource"的变量"r"

enum resource r = BRICK;

if (r == BRICK) {
    printf("I'll trade you a brick for two sheep.\n");
}
```

当然，你也可以使用`typedef`来定义它们，尽管个人我不太喜欢。

``` {.c}
typedef enum {
    SHEEP,
    WHEAT,
    WOOD,
    BRICK,
    ORE
} RESOURCE;

RESOURCE r = BRICK;
```

另一个合法但罕见的快捷方式是在声明`enum`时同时声明变量：

``` {.c}
// 声明一个 enum 和一些初始化的该类型变量：

enum {
    SHEEP,
    WHEAT,
    WOOD,
    BRICK,
    ORE
} r = BRICK, s = WOOD;
```

您也可以给`enum`一个名称，这样您稍后就可以使用它，这在大多数情况下可能是您想要做的：

``` {.c}
// 声明一个 enum 和一些初始化的该类型变量：

enum resource {   // <-- 类型现在是 "enum resource"
    SHEEP,
    WHEAT,
    WOOD,
    BRICK,
    ORE
} r = BRICK, s = WOOD;
```

简而言之，`enum`是编写优雅、有作用域、有类型、干净的代码的好方法。